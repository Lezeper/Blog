{"version":3,"sources":["app.min.js"],"names":["angular","module","config","$routeProvider","$locationProvider","when","templateUrl","controller","controllerAs","otherwise","redirectTo","html5Mode","$scope","year","Date","getFullYear","filter","input","total","parseInt","i","push","$sce","htmlCode","trustAsHtml","id","indexOf","substring","run","$rootScope","$location","authentication","$on","event","nextRoute","currentRoute","isLoggedIn","path","$routeParams","meanData","pageSize","$broadcast","defaultPaging","length","totalPage","totalSize","l","category","keyword","tag","getAllPosts","success","data","posts","getPostsByCategory","getPostsByKeyword","getPostsByTag","changePage","page","j","k","getPostById","post","prismHighlight","Prism","highlightAll","user","clearAllLogs","getAllLogs","views","logs","error","e","console","log","$http","$window","saveToken","token","localStorage","getToken","payload","split","atob","JSON","parse","exp","now","currentUser","email","name","register","login","logout","removeItem","service","$inject","getProfile","get","headers","Authorization","listCategory","listTag","createPost","newPost","updatePost","updatePostData","put","destroyPost","onSubmit","credentials","then","window","location","href","isShowPostsTable","isShowAddPost","isShowUpdatePost","eid","alert","message","reload","confirm","tinymceOptions","height","plugins","toolbar","valid_elements","registerCtrl","vm","this","password","err","navigationCtrl","navigation","restrict","directive","showRightBar","search","categories","tags","rightbar"],"mappings":"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","file":"app.min.js","sourcesContent":["(function () {\n\n  angular.module('meanApp', [\n    'ngRoute', 'meanApp.admin', 'bw.paging', 'ui.tinymce'\n  ]).config(['$routeProvider', '$locationProvider', function ($routeProvider, $locationProvider) {\n    $routeProvider\n      .when('/', {\n        templateUrl: '/home/home.view.html',\n        controller: 'homeCtrl'\n      })\n      .when('/login', {\n        templateUrl: '/auth/login/login.view.html',\n        controller: 'loginCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/p/:id', {\n        templateUrl: '/post/post.view.html',\n        controller: 'postCtrl'\n      })\n      .when('/p', {\n        templateUrl: '/home/home.view.html',\n        controller: 'homeCtrl',\n        controllerAs: 'vm'\n      })\n      .otherwise({redirectTo: '/'});\n\n    $locationProvider.html5Mode(true);\n\n  }])\n    .controller('mainCtrl', function ($scope) {\n      $scope.year = new Date().getFullYear();\n\n    }).filter('range', function () {\n    return function (input, total) {\n      total = parseInt(total);\n\n      for (var i = 0; i < total; i++) {\n        input.push(i);\n      }\n\n      return input;\n    };\n  }).filter(\"sanitize\", ['$sce', function ($sce) {\n    return function (htmlCode) {\n      return $sce.trustAsHtml(htmlCode);\n    }\n  }]).filter(\"sanitizeReadMore\", ['$sce', function ($sce) {\n    return function (htmlCode, id) {\n      if (htmlCode.indexOf(\"<!--more-->\") > -1) {\n        htmlCode = htmlCode.substring(0, htmlCode.indexOf(\"<!--more-->\"));\n        htmlCode += (\"<hr><h4><a href='/p/\" + id + \"'>Read More...</a></h4>\");\n      }\n      return $sce.trustAsHtml(htmlCode);\n    }\n  }]).controller(\"footerCtrl\", ['$scope', function ($scope) {\n    $scope.year = new Date().getFullYear();\n  }]);\n\n  angular.module('meanApp.admin', []).config(['$routeProvider', function ($routeProvider) {\n    $routeProvider\n      .when('/admin', {\n        templateUrl: '/admin/overview/admin.overview.view.html',\n        controller: 'adminCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/admin/post', {\n        templateUrl: '/admin/post/admin.post.view.html',\n        controller: 'adminPostCtrl',\n        controllerAs: 'vm'\n      })\n\n  }]).run(['$rootScope', '$location', 'authentication', function ($rootScope, $location, authentication) {\n    $rootScope.$on('$routeChangeStart', function (event, nextRoute, currentRoute) {\n      if (!authentication.isLoggedIn()) {\n        if ($location.path() === '/admin' || $location.path() === '/admin/post') {\n          $location.path('/');\n        }\n      }\n    });\n  }]);\n\n})();\n\n(function () {\n\n  angular.module('meanApp')\n    .controller('homeCtrl', ['$scope', '$routeParams', 'meanData', 'authentication', '$rootScope',\n      function ($scope, $routeParams, meanData, authentication,$rootScope ) {\n\n        $scope.pageSize = 5;\n        $rootScope.$broadcast('showRightBar', true);\n        $scope.isLoggedIn = authentication.isLoggedIn();\n\n        var defaultPaging = function (length) {\n          $scope.totalPage = length / $scope.pageSize;\n          $scope.totalSize = length;\n          if (length > $scope.pageSize) {\n            for (var i = 1; i <= $scope.pageSize; i++) {\n              $scope[\"isShowPost\" + i] = true;\n            }\n          } else {\n            for (var l = 1; l <= length; l++) {\n              $scope[\"isShowPost\" + l] = true;\n            }\n          }\n        };\n\n        if (!$routeParams.category && !$routeParams.keyword && !$routeParams.tag) {\n          meanData.getAllPosts()\n            .success(function (data) {\n              $scope.posts = data;\n              defaultPaging(data.length);\n            });\n        }\n\n        if ($routeParams.category) {\n          meanData.getPostsByCategory($routeParams.category)\n            .success(function (data) {\n              $scope.posts = data;\n              defaultPaging(data.length);\n            });\n        }\n\n        if ($routeParams.keyword) {\n          meanData.getPostsByKeyword($routeParams.keyword).success(function (data) {\n            $scope.posts = data;\n            defaultPaging(data.length);\n          });\n        }\n\n        if ($routeParams.tag) {\n          meanData.getPostsByTag($routeParams.tag)\n            .success(function (data) {\n              $scope.posts = data;\n              defaultPaging(data.length);\n            });\n        }\n\n        $scope.changePage = function (page) {\n\n          for (var i = (page - 1) * $scope.pageSize + 1; i <= (page - 1) * $scope.pageSize + $scope.pageSize; i++) {\n            $scope[\"isShowPost\" + i] = true;\n          }\n          for (var j = 1; j <= (page - 1) * $scope.pageSize; j++) {\n            $scope[\"isShowPost\" + j] = false;\n          }\n          for (var k = page * $scope.pageSize + 1; k <= $scope.totalSize; k++) {\n            $scope[\"isShowPost\" + k] = false;\n          }\n        };\n\n        $scope.$on('posts', function (event, data) {\n          $scope.posts = data;\n          defaultPaging(data.length);\n        });\n\n      }]);\n})();\n(function () {\n\n  angular.module('meanApp')\n    .controller('postCtrl', ['$scope', '$routeParams', 'meanData', '$rootScope',\n      function ($scope, $routeParams, meanData, $rootScope) {\n\n        $rootScope.$broadcast('showRightBar', false);\n\n      if($routeParams.id){\n        meanData.getPostById($routeParams.id)\n          .success(function (data) {\n            $scope.post = data;\n          })\n      }\n\n      $scope.prismHighlight = function () {\n        Prism.highlightAll ();\n      };\n\n    }]);\n})();\n(function () {\n\n  angular.module('meanApp')\n    .controller('adminCtrl', ['$scope', '$location', 'meanData', '$rootScope', function ($scope, $location, meanData, $rootScope) {\n\n      $scope.user = {};\n      $rootScope.$broadcast('showRightBar', true);\n      \n      $scope.clearAllLogs = function () {\n        meanData.clearAllLogs().success(function () {\n          $scope.getAllLogs();\n        })\n      };\n\n      $scope.views =\n\n      $scope.getAllLogs = function () {\n        meanData.getAllLogs()\n          .success(function (data) {\n            $scope.logs = data;\n          })\n          .error(function (e) {\n            console.log(e);\n          });\n      };\n\n    }]);\n})();\n\n(function () {\n\n  angular\n    .module('meanApp')\n    .service('authentication', authentication);\n\n  authentication.$inject = ['$http', '$window'];\n  function authentication ($http, $window) {\n\n    var saveToken = function (token) {\n      $window.localStorage['mean-token'] = token;\n    };\n\n    var getToken = function () {\n      return $window.localStorage['mean-token'];\n    };\n\n    var isLoggedIn = function() {\n      var token = getToken();\n      var payload;\n\n      if(token){\n        payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n\n        return payload.exp > Date.now() / 1000;\n      } else {\n        return false;\n      }\n    };\n\n    var currentUser = function() {\n      if(isLoggedIn()){\n        var token = getToken();\n        var payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n        return {\n          email : payload.email,\n          name : payload.name\n        };\n      }\n    },\n\n    register = function(user) {\n      return $http.post('/api/register', user).success(function(data){\n        saveToken(data.token);\n      });\n    },\n\n    login = function(user) {\n      return $http.post('/api/login', user).success(function(data) {\n        saveToken(data.token);\n      });\n    },\n\n    logout = function() {\n      $window.localStorage.removeItem('mean-token');\n    };\n\n    return {\n      currentUser : currentUser,\n      saveToken : saveToken,\n      getToken : getToken,\n      isLoggedIn : isLoggedIn,\n      register : register,\n      login : login,\n      logout : logout\n    };\n  }\n\n\n})();\n(function () {\n\n  angular.module('meanApp')\n    .service('meanData', ['$http', 'authentication', function meanData($http, authentication) {\n\n      var getProfile = function () {\n        return $http.get('/api/profile', {\n          headers: {\n            Authorization: 'Bearer ' + authentication.getToken()\n          }\n        });\n      };\n\n      var getAllPosts = function () {\n        return $http.get('/api/post')\n      };\n\n      var getPostsByKeyword = function (keyword) {\n        return $http.get('/api/post/keyword/' + keyword)\n      };\n\n      var getPostById = function (id) {\n        return $http.get('/api/post/id/' + id)\n      };\n\n      var getPostsByCategory = function (category) {\n        return $http.get('/api/post/category/' + category);\n      };\n\n      var getPostsByTag = function (tag) {\n        return $http.get('/api/post/tag/' + tag);\n      };\n\n      var listCategory = function () {\n        return $http.get('/api/post/category');\n      };\n\n      var listTag = function () {\n        return $http.get('/api/post/tag');\n      };\n\n      var createPost = function (newPost) {\n        return $http.post('/api/post/', newPost, {\n          headers: {\n            Authorization: 'Bearer ' + authentication.getToken()\n          }\n        });\n      };\n\n      var updatePost = function (id, updatePostData) {\n        return $http.put('/api/post/id/' + id, updatePostData, {\n          headers: {\n            Authorization: 'Bearer ' + authentication.getToken()\n          }\n        })\n      };\n\n      var destroyPost = function (id) {\n        return $http.delete('/api/post/id/' + id, {\n          headers: {\n            Authorization: 'Bearer ' + authentication.getToken()\n          }\n        })\n      };\n\n      var getAllLogs =function () {\n        return $http.get('/api/log', {\n          headers: {\n            Authorization: 'Bearer ' + authentication.getToken()\n          }\n        })\n      };\n\n      var clearAllLogs = function () {\n        return $http.delete('/api/log', {\n          headers: {\n            Authorization: 'Bearer ' + authentication.getToken()\n          }\n        })\n      };\n\n      return {\n        getProfile: getProfile,\n        getAllPosts: getAllPosts,\n        getPostsByKeyword: getPostsByKeyword,\n        getPostById: getPostById,\n        createPost: createPost,\n        updatePost: updatePost,\n        destroyPost: destroyPost,\n        listCategory: listCategory,\n        listTag: listTag,\n        getPostsByCategory: getPostsByCategory,\n        getPostsByTag: getPostsByTag,\n        getAllLogs: getAllLogs,\n        clearAllLogs: clearAllLogs\n      };\n    }]);\n\n})();\n(function () {\n\n  angular.module('meanApp')\n  .controller('loginCtrl', ['$scope', '$location', 'authentication', '$rootScope',\n    function ($scope, $location, authentication, $rootScope) {\n\n    $scope.error = false;\n    $rootScope.$broadcast('showRightBar', false);\n      \n    $scope.onSubmit = function () {\n      authentication\n        .login($scope.credentials)\n        .error(function(){\n          $scope.error = true;\n        })\n        .then(function(){\n          window.location.href = \"/admin\";\n        });\n    };\n  }]);\n})();\n(function () {\n\n  angular.module('meanApp')\n    .controller('adminPostCtrl', ['$scope', '$location', 'meanData', '$routeParams', '$rootScope',\n      function ($scope, $location, meanData, $routeParams, $rootScope) {\n\n        $scope.isShowPostsTable = true;\n        $scope.isShowAddPost = false;\n        $scope.isShowUpdatePost = false;\n\n        $rootScope.$broadcast('showRightBar', true);\n\n        if ($routeParams.eid) {\n          meanData.getPostById($routeParams.eid)\n            .success(function (data) {\n              $scope.updatePostData = data;\n              $scope.isShowUpdatePost = true;\n              $scope.isShowPostsTable = false;\n            })\n            .error(function (e) {\n              alert(e.message);\n            });\n        }\n\n        $scope.getAllPosts = function () {\n          meanData.getAllPosts()\n            .success(function (data) {\n              $scope.posts = data;\n            })\n            .error(function (e) {\n              alert(e.message);\n            });\n        };\n\n        $scope.createPost = function () {\n          meanData.createPost($scope.newPost)\n            .success(function () {\n              window.location.reload();\n            })\n            .error(function (e) {\n              alert(e.message);\n            });\n        };\n\n        $scope.updatePost = function (id) {\n          meanData.updatePost(id, $scope.updatePostData)\n            .success(function () {\n              window.location.reload();\n            })\n            .error(function (e) {\n              alert(e.message);\n            });\n        };\n\n        $scope.destroyPost = function (id) {\n          if (confirm(\"Are you sure to remove this post?\")) {\n            meanData.destroyPost(id)\n              .success(function () {\n                $scope.getAllPosts();\n              })\n              .error(function (e) {\n                alert(e.message);\n              });\n          }\n        };\n\n        $scope.tinymceOptions = {\n          height: 500,\n          plugins: 'link image codesample advlist code preview',\n          toolbar: 'undo redo | bold italic | alignleft aligncenter alignright | bullist numlist | codesample | link image',\n          valid_elements : '*[*]'\n        };\n\n      }]);\n})();\n\n(function () {\n\n  angular\n    .module('meanApp')\n    .controller('registerCtrl', registerCtrl);\n\n  registerCtrl.$inject = ['$location', 'authentication'];\n  function registerCtrl($location, authentication) {\n    var vm = this;\n\n    vm.credentials = {\n      name : \"\",\n      email : \"\",\n      password : \"\"\n    };\n\n    vm.onSubmit = function () {\n      console.log('Submitting registration');\n      authentication\n        .register(vm.credentials)\n        .error(function(err){\n          alert(err);\n        })\n        .then(function(){\n          $location.path('profile');\n        });\n    };\n\n  }\n\n})();\n(function () {\n\n  angular.module('meanApp')\n    .controller('navigationCtrl', navigationCtrl);\n\n  navigationCtrl.$inject = ['$scope', '$location', 'authentication'];\n  function navigationCtrl($scope, $location, authentication) {\n\n    $scope.isLoggedIn = authentication.isLoggedIn();\n\n    $scope.currentUser = authentication.currentUser();\n\n  }\n\n})();\n(function () {\n\n  angular\n    .module('meanApp')\n    .directive('navigation', navigation);\n\n  function navigation () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/common/directives/navigation/navigation.template.html',\n      controller: 'navigationCtrl as navvm'\n    };\n  }\n\n})();\n\n(function () {\n\n  angular.module('meanApp')\n    .controller('rightbarCtrl', ['$scope', 'meanData', 'authentication', '$rootScope',\n      function ($scope, meanData, authentication, $rootScope) {\n\n        $scope.isLoggedIn = authentication.isLoggedIn();\n\n        $scope.showRightBar = true;\n\n        $scope.$on('showRightBar', function(event, data){\n          $scope.showRightBar = data;\n        });\n\n        $scope.logout = function () {\n          authentication.logout();\n          window.location.href = \"/\";\n        };\n\n        $scope.search = function () {\n          if($scope.keyword != ''){\n            meanData.getPostsByKeyword($scope.keyword).success(function (data) {\n              $rootScope.$broadcast('posts', data);\n            })\n          }else{\n            meanData.getAllPosts().success(function (data) {\n              $rootScope.$broadcast('posts', data);\n            });\n          }\n        };\n\n        meanData.listCategory().success(function (data) {\n          $scope.categories = data;\n        });\n\n        meanData.listTag().success(function (data) {\n          $scope.tags = data;\n        })\n      }]);\n\n})();\n(function () {\n\n  angular.module('meanApp')\n    .directive('rightbar', rightbar);\n\n  function rightbar() {\n    return {\n      restrict: 'EA',\n      templateUrl: '/common/directives/rightbar/rightbar.template.html',\n      controller: 'rightbarCtrl'\n    };\n  }\n\n})();\n"],"sourceRoot":"/source/"}